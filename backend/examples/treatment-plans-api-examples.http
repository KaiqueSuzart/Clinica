### API de Planos de Tratamento - Exemplos de Uso

# Configuração base
@baseUrl = http://localhost:3000
@authToken = {{login.response.body.access_token}}

### 1. Login para obter token de autenticação
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@clinica.com",
  "password": "senha123"
}

### 2. Criar um novo plano de tratamento
POST {{baseUrl}}/treatment-plans
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "patientId": "uuid-do-paciente-aqui",
  "title": "Plano de Tratamento Ortodôntico",
  "description": "Tratamento completo de ortodontia para correção da mordida",
  "items": [
    {
      "procedure": "Ortodontia",
      "description": "Avaliação inicial e planejamento",
      "priority": "alta",
      "estimatedCost": 150.00,
      "estimatedSessions": 1,
      "status": "planejado",
      "notes": "Primeira consulta para avaliação",
      "order": 1
    },
    {
      "procedure": "Ortodontia",
      "description": "Instalação do aparelho fixo",
      "priority": "alta",
      "estimatedCost": 2500.00,
      "estimatedSessions": 2,
      "status": "planejado",
      "notes": "Instalação do aparelho superior e inferior",
      "order": 2
    },
    {
      "procedure": "Ortodontia",
      "description": "Ajustes mensais",
      "priority": "media",
      "estimatedCost": 200.00,
      "estimatedSessions": 12,
      "status": "planejado",
      "notes": "Ajustes mensais durante 12 meses",
      "order": 3
    }
  ]
}

### 3. Buscar todos os planos de tratamento
GET {{baseUrl}}/treatment-plans
Authorization: Bearer {{authToken}}

### 4. Buscar planos de tratamento de um paciente específico
GET {{baseUrl}}/treatment-plans/patient/uuid-do-paciente-aqui
Authorization: Bearer {{authToken}}

### 5. Buscar progresso do tratamento de um paciente
GET {{baseUrl}}/treatment-plans/patient/uuid-do-paciente-aqui/progress
Authorization: Bearer {{authToken}}

### 6. Buscar um plano de tratamento específico
GET {{baseUrl}}/treatment-plans/uuid-do-plano-aqui
Authorization: Bearer {{authToken}}

### 7. Atualizar um plano de tratamento
PATCH {{baseUrl}}/treatment-plans/uuid-do-plano-aqui
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "title": "Plano de Tratamento Ortodôntico - Atualizado",
  "description": "Tratamento completo de ortodontia com ajustes no cronograma",
  "items": [
    {
      "procedure": "Ortodontia",
      "description": "Avaliação inicial e planejamento",
      "priority": "alta",
      "estimatedCost": 150.00,
      "estimatedSessions": 1,
      "status": "concluido",
      "notes": "Primeira consulta concluída com sucesso",
      "order": 1
    },
    {
      "procedure": "Ortodontia",
      "description": "Instalação do aparelho fixo",
      "priority": "alta",
      "estimatedCost": 2500.00,
      "estimatedSessions": 2,
      "status": "em_andamento",
      "notes": "Aparelho superior instalado, aguardando inferior",
      "order": 2
    },
    {
      "procedure": "Ortodontia",
      "description": "Ajustes mensais",
      "priority": "media",
      "estimatedCost": 200.00,
      "estimatedSessions": 12,
      "status": "planejado",
      "notes": "Ajustes mensais durante 12 meses",
      "order": 3
    }
  ]
}

### 8. Atualizar status de um item específico
PATCH {{baseUrl}}/treatment-plans/uuid-do-plano-aqui/items/uuid-do-item-aqui/status
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "status": "concluido"
}

### 9. Remover um plano de tratamento
DELETE {{baseUrl}}/treatment-plans/uuid-do-plano-aqui
Authorization: Bearer {{authToken}}

### 10. Exemplo de plano de tratamento para limpeza e restauração
POST {{baseUrl}}/treatment-plans
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "patientId": "uuid-do-paciente-aqui",
  "title": "Plano de Tratamento Preventivo",
  "description": "Limpeza, restaurações e tratamento de gengiva",
  "items": [
    {
      "procedure": "Limpeza",
      "description": "Limpeza completa e profilaxia",
      "priority": "alta",
      "estimatedCost": 120.00,
      "estimatedSessions": 1,
      "status": "planejado",
      "notes": "Remoção de tártaro e placa bacteriana",
      "order": 1
    },
    {
      "procedure": "Restauração",
      "description": "Restauração do dente 16",
      "tooth": "16",
      "priority": "alta",
      "estimatedCost": 180.00,
      "estimatedSessions": 1,
      "status": "planejado",
      "notes": "Cárie profunda, necessita restauração",
      "order": 2
    },
    {
      "procedure": "Periodontia",
      "description": "Tratamento de gengivite",
      "priority": "media",
      "estimatedCost": 300.00,
      "estimatedSessions": 3,
      "status": "planejado",
      "notes": "Tratamento em 3 sessões",
      "order": 3
    }
  ]
}

### 11. Exemplo de plano de tratamento para implante
POST {{baseUrl}}/treatment-plans
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "patientId": "uuid-do-paciente-aqui",
  "title": "Plano de Tratamento com Implante",
  "description": "Extração, implante e prótese",
  "items": [
    {
      "procedure": "Extração",
      "description": "Extração do dente 26",
      "tooth": "26",
      "priority": "alta",
      "estimatedCost": 200.00,
      "estimatedSessions": 1,
      "status": "planejado",
      "notes": "Dente com mobilidade excessiva",
      "order": 1
    },
    {
      "procedure": "Implante",
      "description": "Instalação do implante no local do dente 26",
      "tooth": "26",
      "priority": "alta",
      "estimatedCost": 3500.00,
      "estimatedSessions": 2,
      "status": "planejado",
      "notes": "Implante de titânio com coroa",
      "order": 2
    },
    {
      "procedure": "Prótese",
      "description": "Instalação da coroa sobre o implante",
      "tooth": "26",
      "priority": "alta",
      "estimatedCost": 800.00,
      "estimatedSessions": 1,
      "status": "planejado",
      "notes": "Coroa de porcelana",
      "order": 3
    }
  ]
}
